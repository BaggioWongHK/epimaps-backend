<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Global</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Global</h1>

    




<section>

<header>
    
        <h2></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="articleExists"><span class="type-signature"></span>articleExists<span class="signature">(wikipediaUrl)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Checks if Wikipedia URL is valid (if article
exists).
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>wikipediaUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="wikipedia.js.html">wikipedia.js</a>, <a href="wikipedia.js.html#line312">line 312</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    Resolves to true if status code is 200,
false if status code is 404.

This also takes into account redirects. How Wikipedia handles
redirects is that it redirects invalid queries to a page, and
it's only at the end of the redirects that a 404 response code
is sent back. Of course, if the redirect is indeed valid, then
a 200 status code is sent back normally.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getArticleId"><span class="type-signature"></span>getArticleId<span class="signature">(wikipediaUrl)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    This takes in a Wikipedia URL and retrieves
its article id, or pageId as it's sent back from Wikipedia's
servers.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>wikipediaUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="wikipedia.js.html">wikipedia.js</a>, <a href="wikipedia.js.html#line83">line 83</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    A promise with the article id. If the page
doesn't exist, or the URL is improperly formed (e.g. illegal
symbols), rejects.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getArticleImages"><span class="type-signature"></span>getArticleImages<span class="signature">(wikipediaUrl)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Extract an article's images give its
Wikipedia URL.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>wikipediaUrl</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="wikipedia.js.html">wikipedia.js</a>, <a href="wikipedia.js.html#line176">line 176</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>There is one special case that should be considered,
the no images case, but because this is highly unlikely,
finding an article to actually test this on is hard (and
we need to have a look at the JSON structure to know what
comes back and process it). In any case, should be easy
enough to add.</li>
        </ul>
    </dd>
    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    Either returns an array of the following:
{ title: string, url?: string, error?: string}
or passes errors to the error handling facilities of
getArticleId, since they're likely to be the same as
well.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getArticleSummary"><span class="type-signature"></span>getArticleSummary<span class="signature">(wikipediaUrl)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    This extracts a Wikipedia article's summary.
By "summary", we refer to the paragraphs before the content
navigation box at the top of the article.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>wikipediaUrl</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="wikipedia.js.html">wikipedia.js</a>, <a href="wikipedia.js.html#line124">line 124</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    A promise of the summary if valid, rejects
if request invalid or page doesn't exist.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getArticleThumbnail"><span class="type-signature"></span>getArticleThumbnail<span class="signature">(wikipediaUrl)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Extracts thumbnail of Wikipedia article.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>wikipediaUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="wikipedia.js.html">wikipedia.js</a>, <a href="wikipedia.js.html#line268">line 268</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    Returns Wikimedia thumbnail URL,
rejects URL improper, article non-existent or perhaps
the page itself just doesn't have thumbnails.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getCanonicalURL"><span class="type-signature"></span>getCanonicalURL<span class="signature">(query)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Retrieves the canonical URL based on a query,
if a corresponding Wikipedia page exists.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>query</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Similar to a query entered in Wikipedia
search.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="wikipedia.js.html">wikipedia.js</a>, <a href="wikipedia.js.html#line341">line 341</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    canonicalLink Either a valid canonical link
or an error message.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getEpiTrees"><span class="type-signature"></span>getEpiTrees<span class="signature">(url, A)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    This function takes a valid URL, and
attempts to extract epistemic trees from the navBoxes
typically found at the bottom of Wiki pages.

So far, in the cases I've analyzed, and because of the way
the code is written, there are no cases where I've encountered
errors yet, so reject handlers aren't defined in the promise.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">string A valid URL whose HTML we want to
analyze.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>A</code></td>
            

            <td class="type">
            
                
<span class="param-type">Promise</span>


            
            </td>

            

            

            <td class="description last">promise containing returned trees.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="wikipedia.js.html">wikipedia.js</a>, <a href="wikipedia.js.html#line541">line 541</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="getTodaysTrends"><span class="type-signature"></span>getTodaysTrends<span class="signature">()</span><span class="type-signature"> &rarr; {Array}</span></h4>
    

    



<div class="description">
    This gets the data needed from this Google
Trend API call. There are a maximum of 300 items included
in the API call, each of which comes with a unique ID, which
can be used to make further API calls to fetch each story item,
~~but I'm settling with just the default list that comes on
page load~~.

The Google Trends API in question:
https://trends.google.com/trends/api/stories/latest?hl=en-GB&tz=-480&cat=all&fi=15&fs=15&geo=US&ri=300&rs=15&sort=0

Please note that there's a reason I didn't use the httpsJson
or httpsHtml convenience methods here. For some reason, doing
regex processing on the returned strings proved buggy, so I
had to desugar the convenience methods once again.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="wikipedia.js.html">wikipedia.js</a>, <a href="wikipedia.js.html#line629">line 629</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    List of story titles.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getTree"><span class="type-signature"></span>getTree<span class="signature">(navBox)</span><span class="type-signature"> &rarr; {Array}</span></h4>
    

    



<div class="description">
    Converts a Wikipedia style navBox at the
bottom of a Wiki page and saves it in a tree structure.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>navBox</code></td>
            

            <td class="type">
            
                
<span class="param-type">jQuery</span>


            
            </td>

            

            

            <td class="description last">A navBox is an Object returned by cheerio's
$('.navbox') function. It's a standard navigation box
that shows the structure of the branch of knowledge
to which the currently viewed Wiki article subject
belongs.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="wikipedia.js.html">wikipedia.js</a>, <a href="wikipedia.js.html#line427">line 427</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    This function returns a Tree representing the
navBox. Each node should have data that contains
{ title: link text, link?: href value }. The link is optional
because some elements might simply be headers, and don't
link to any Wiki pages.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getWikiLinks"><span class="type-signature"></span>getWikiLinks<span class="signature">(url, selector)</span><span class="type-signature"> &rarr; {Array}</span></h4>
    

    



<div class="description">
    This will grab a Wikipedia wiki page and
 extract an array of links from it.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Valid URL whose HTML we want to process.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>selector</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Valid CSS selector to use to grab links.
 A combination of the link selector 'a' and other selectors
 is recommended.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="wikipedia.js.html">wikipedia.js</a>, <a href="wikipedia.js.html#line383">line 383</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    a collection of <a> elements, where each
 item has the structure
 { link: string, title?: string }
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getWikimediaImageUrl"><span class="type-signature"></span>getWikimediaImageUrl<span class="signature">(imageTitle)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    This extracts the Wikimedia image URL based
on the imageTitle, or this property
['query']['pages'][pageid]['images'][0]['title']
when grabbing images on a page.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>imageTitle</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Looks something like this
File:Bodlein_Library_MS._Arab.d.84_roll332_frame1.jpg</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="wikipedia.js.html">wikipedia.js</a>, <a href="wikipedia.js.html#line235">line 235</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li>See getArticleImages.</li>
        </ul>
    </dd>
    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    A promise of the image URL if valid,
rejects if the image doesn't exist, the title is invalid,
or perhaps the image does exist but can't be processed by
Wikipedia's API. (https://en.wikipedia.org/w/api.php?action=query&prop=imageinfo&iiprop=url&format=json&titles=)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="httpsHtml"><span class="type-signature"></span>httpsHtml<span class="signature">(url)</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    This take a URL that fetches HTML data and
returns the string as is.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="wikipedia.js.html">wikipedia.js</a>, <a href="wikipedia.js.html#line50">line 50</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    HTML string
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="httpsJson"><span class="type-signature"></span>httpsJson<span class="signature">(url)</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    This take a URL that fetches JSON data and
returns the string as is. We don't parse it here because
the JSON data may need modifications.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="wikipedia.js.html">wikipedia.js</a>, <a href="wikipedia.js.html#line13">line 13</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    JSON string.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="validWikipediaUrl"><span class="type-signature"></span>validWikipediaUrl<span class="signature">(url)</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    

    



<div class="description">
    Validates whether url is of the format
https://en.wikipedia.org/wiki/[articleName].
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="wikipedia.js.html">wikipedia.js</a>, <a href="wikipedia.js.html#line763">line 763</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#articleExists">articleExists</a></li><li><a href="global.html#getArticleId">getArticleId</a></li><li><a href="global.html#getArticleImages">getArticleImages</a></li><li><a href="global.html#getArticleSummary">getArticleSummary</a></li><li><a href="global.html#getArticleThumbnail">getArticleThumbnail</a></li><li><a href="global.html#getCanonicalURL">getCanonicalURL</a></li><li><a href="global.html#getEpiTrees">getEpiTrees</a></li><li><a href="global.html#getTodaysTrends">getTodaysTrends</a></li><li><a href="global.html#getTree">getTree</a></li><li><a href="global.html#getWikiLinks">getWikiLinks</a></li><li><a href="global.html#getWikimediaImageUrl">getWikimediaImageUrl</a></li><li><a href="global.html#httpsHtml">httpsHtml</a></li><li><a href="global.html#httpsJson">httpsJson</a></li><li><a href="global.html#validWikipediaUrl">validWikipediaUrl</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Feb 05 2018 17:39:22 GMT+0800 (HKT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>